import { CategoryDataGroupType, CategoryType } from '~/types/category';

export const categories: CategoryDataGroupType[] = [
  {
    age: '12_14',
    gender: 'woman',
    categories: ['学業・受験・進学', '友人関係', '家族との関係', '日々の生活', '趣味'],
  },
  {
    age: '12_14',
    gender: 'man',
    categories: ['学業・受験・進学', '友人関係', '家族との関係', '日々の生活', '趣味'],
  },
  {
    age: '12_14',
    gender: 'other',
    categories: ['学業・受験・進学', '友人関係', '家族との関係', '日々の生活', '趣味'],
  },
  {
    age: '15_19',
    gender: 'woman',
    categories: ['学業・受験・進学', '友人関係', '日々の生活', '家族との関係', '趣味'],
  },
  {
    age: '15_19',
    gender: 'man',
    categories: ['学業・受験・進学', '友人関係', '家族との関係', '仕事のこと', '趣味'],
  },
  {
    age: '15_19',
    gender: 'other',
    categories: ['学業・受験・進学', '友人関係', '家族との関係', '日々の生活', '趣味'],
  },
  {
    age: '20_24',
    gender: 'woman',
    categories: ['仕事のこと', '友人関係', '学業・受験・進学', 'お金のこと', '趣味'],
  },
  {
    age: '20_24',
    gender: 'man',
    categories: ['仕事のこと', '学業・受験・進学', 'お金のこと', '友人関係', '趣味'],
  },
  {
    age: '20_24',
    gender: 'other',
    categories: ['仕事のこと', '学業・受験・進学', 'お金のこと', '友人関係', '趣味'],
  },
  {
    age: '25_29',
    gender: 'woman',
    categories: ['仕事のこと', 'お金のこと', '友人関係', '家族との関係', '育児'],
  },
  {
    age: '25_29',
    gender: 'man',
    categories: ['仕事のこと', 'お金のこと', '友人関係', '趣味', '日々の生活'],
  },
  {
    age: '25_29',
    gender: 'other',
    categories: ['仕事のこと', 'お金のこと', '友人関係', '趣味', '家族との関係'],
  },
  {
    age: '30_34',
    gender: 'woman',
    categories: ['仕事のこと', 'お金のこと', '育児', '家事', '友人関係'],
  },
  {
    age: '30_34',
    gender: 'man',
    categories: ['仕事のこと', 'お金のこと', '友人関係', '日々の生活', '趣味'],
  },
  {
    age: '30_34',
    gender: 'other',
    categories: ['仕事のこと', 'お金のこと', '育児', '友人関係', '日々の生活'],
  },
  {
    age: '35_39',
    gender: 'woman',
    categories: ['仕事のこと', 'お金のこと', '育児', '子どもの教育', '家事'],
  },
  {
    age: '35_39',
    gender: 'man',
    categories: ['仕事のこと', 'お金のこと', '友人関係', '日々の生活', '家族との関係'],
  },
  {
    age: '35_39',
    gender: 'other',
    categories: ['仕事のこと', 'お金のこと', '育児', '子どもの教育', '友人関係'],
  },
  {
    age: '40_44',
    gender: 'woman',
    categories: ['仕事のこと', 'お金のこと', '子どもの教育', '育児', '家族との関係'],
  },
  {
    age: '40_44',
    gender: 'man',
    categories: ['仕事のこと', 'お金のこと', '友人関係', '子どもの教育', '日々の生活'],
  },
  {
    age: '40_44',
    gender: 'other',
    categories: ['仕事のこと', 'お金のこと', '子どもの教育', '友人関係', '家族との関係'],
  },
  {
    age: '45_49',
    gender: 'woman',
    categories: ['仕事のこと', 'お金のこと', '子どもの教育', '家族との関係', '友人関係'],
  },
  {
    age: '45_49',
    gender: 'man',
    categories: ['仕事のこと', 'お金のこと', '友人関係', '子どもの教育', '自分の健康'],
  },
  {
    age: '45_49',
    gender: 'other',
    categories: ['仕事のこと', 'お金のこと', '子どもの教育', '友人関係', '家族との関係'],
  },
  {
    age: '50_54',
    gender: 'woman',
    categories: ['仕事のこと', 'お金のこと', '家族の健康', '家族との関係', '自分の健康'],
  },
  {
    age: '50_54',
    gender: 'man',
    categories: ['仕事のこと', 'お金のこと', '家族の健康', '友人関係', '自分の健康'],
  },
  {
    age: '50_54',
    gender: 'other',
    categories: ['仕事のこと', 'お金のこと', '家族の健康', '友人関係', '家族との関係'],
  },
  {
    age: '55_59',
    gender: 'woman',
    categories: ['仕事のこと', '家族の健康', 'お金のこと', '自分の健康', '家族との関係'],
  },
  {
    age: '55_59',
    gender: 'man',
    categories: ['仕事のこと', 'お金のこと', '家族の健康', '自分の健康', '友人関係'],
  },
  {
    age: '55_59',
    gender: 'other',
    categories: ['仕事のこと', 'お金のこと', '家族の健康', '自分の健康', '家族との関係'],
  },
  {
    age: '60_64',
    gender: 'woman',
    categories: ['家族の健康', 'お金のこと', '仕事のこと', '自分の健康', '家族との関係'],
  },
  {
    age: '60_64',
    gender: 'man',
    categories: ['仕事のこと', 'お金のこと', '自分の健康', '家族の健康', '友人関係'],
  },
  {
    age: '60_64',
    gender: 'other',
    categories: ['仕事のこと', 'お金のこと', '家族の健康', '自分の健康', '家族との関係'],
  },
  {
    age: '65_69',
    gender: 'woman',
    categories: ['自分の健康', '家族の健康', 'お金のこと', '家族との関係', '仕事のこと'],
  },
  {
    age: '65_69',
    gender: 'man',
    categories: ['自分の健康', 'お金のこと', '仕事のこと', '家族の健康', '趣味'],
  },
  {
    age: '65_69',
    gender: 'other',
    categories: ['自分の健康', 'お金のこと', '家族の健康', '仕事のこと', '家族との関係'],
  },
  {
    age: '70_74',
    gender: 'woman',
    categories: ['自分の健康', '家族の健康', 'お金のこと', '家族との関係', '趣味'],
  },
  {
    age: '70_74',
    gender: 'man',
    categories: ['自分の健康', 'お金のこと', '家族の健康', '仕事のこと', '家族との関係'],
  },
  {
    age: '70_74',
    gender: 'other',
    categories: ['自分の健康', 'お金のこと', '家族の健康', '家族との関係', '趣味'],
  },
  {
    age: '75_79',
    gender: 'woman',
    categories: ['自分の健康', '家族の健康', '家族との関係', 'お金のこと', '趣味'],
  },
  {
    age: '75_79',
    gender: 'man',
    categories: ['自分の健康', 'お金のこと', '家族の健康', '家族との関係', '趣味'],
  },
  {
    age: '75_79',
    gender: 'other',
    categories: ['自分の健康', '家族の健康', 'お金のこと', '家族との関係', '趣味'],
  },
  {
    age: '80_84',
    gender: 'woman',
    categories: ['自分の健康', '家族の健康', '家族との関係', 'お金のこと', '趣味'],
  },
  {
    age: '80_84',
    gender: 'man',
    categories: ['自分の健康', '家族の健康', 'お金のこと', '家族との関係', '趣味'],
  },
  {
    age: '80_84',
    gender: 'other',
    categories: ['自分の健康', '家族の健康', '家族との関係', 'お金のこと', '趣味'],
  },
  {
    age: '85_',
    gender: 'woman',
    categories: ['自分の健康', '家族との関係', '家族の健康', '趣味', '家事'],
  },
  {
    age: '85_',
    gender: 'man',
    categories: ['自分の健康', '家族の健康', '趣味', '家族との関係', 'お金のこと'],
  },
  {
    age: '85_',
    gender: 'other',
    categories: ['自分の健康', '家族の健康', '家族との関係', '趣味', 'お金のこと'],
  },
];

const categoryImageMap: Record<string, string> = {
  '学業・受験・進学': '/img/category/study.jpg',
  友人関係: '/img/category/friends.jpg',
  家族との関係: '/img/category/family.jpg',
  日々の生活: '/img/category/daily_life.jpg',
  趣味: '/img/category/hobby.jpg',
  仕事のこと: '/img/category/work.jpg',
  お金のこと: '/img/category/money.jpg',
  育児: '/img/category/childcare.jpg',
  家事: '/img/category/housework.jpg',
  子どもの教育: '/img/category/child_education.jpg',
  自分の健康: '/img/category/self_health.jpg',
  家族の健康: '/img/category/family_health.jpg',
  その他: '/img/category/other.jpg',
};

export function getCategoryData(age: string, gender: string): CategoryType[] {
  const matchedCategories = categories.find((item) => item.age === age && item.gender === gender)?.categories ?? [];
  if (!matchedCategories) return [];

  const baseCategories = matchedCategories.map((category) => ({
    category,
    imageUrl: categoryImageMap[category] ?? '/img/category/default.jpg', // マップにない場合のデフォルト画像
  }));
  return [
    ...baseCategories,
    {
      category: 'その他',
      imageUrl: categoryImageMap['その他'],
    },
  ];
}

export function getAgeGroup(age: number): string {
  if (age >= 85) {
    return '85_';
  }

  const ageGroups = [
    [12, 14],
    [14, 19],
    [19, 24],
    [24, 29],
    [29, 34],
    [34, 39],
    [39, 44],
    [44, 49],
    [49, 54],
    [54, 59],
    [59, 64],
    [64, 69],
    [69, 74],
    [74, 79],
    [79, 84],
  ];

  for (const [start, end] of ageGroups) {
    if (age >= start && age <= end) {
      return `${start}_${end}`;
    }
  }

  // この時点で age < 12 や age > 84 はない前提なので fallback は必要ないはず
  throw new Error(`Unexpected age: ${age}`);
}
